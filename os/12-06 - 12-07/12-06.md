# 가상 메모리의 기초



## 가상 메모리 시스템



### 가상 메모리 개념

- **물리 메모리의 크기와 상관없이 프로세스에 커다란 메모리 공간을 제공하는 기술**
- 가상 메모리를 이용하면 프로세스는 운영체제가 어디에 있는지, 물리 메모리의 크기가 어느 정도인지 신경 쓰지 않고 메모리를 마음대로 사용할 수 있음

- 가상메모리 필요성 예시
    - 주방 규모를 고려한 레시피 개발의 어려움
        - 새로운 레시피를 개발할 때 요리사가 주방의 크기까지 고려해야 한다면 제약 사항이 너무 많음
          
            <img src="image\스크린샷_2022-05-09_오후_4.10.08.png" alt="스크린샷_2022-05-09_오후_4.10.08" style="zoom:50%;" />



### 가상 메모리 구성

<img src="image\스크린샷_2022-05-09_오후_4.10.37.png" alt="스크린샷_2022-05-09_오후_4.10.37" style="zoom:50%;" />

- 크게 프로세스가 바라보는 메모리 영역, 메모리 관리자가 바라보는 메모리영역 2가지로 나뉨
- 가상 메모리에서 메모리 관리자는 물리 메모리의 부족한 부분을 스왑 영역으로 보충



### 가상 메모리 크기

<img src="image\스크린샷_2022-05-09_오후_4.18.27.png" alt="스크린샷_2022-05-09_오후_4.18.27" style="zoom:50%;" />



### 동적 주소 변환

- 가상 주소를 실제 메모리의 물리 주소로 변환
- 동적 주소 변환을 거치면 프로세스가 아무 제약없이 사용자의 데이터를 물리 메모리에 배치할 수 있음

> 절대주소의 대비 되는 주소는 상대주소 이지만, 가상 주소는 상대주소를 이용할뿐 같은 개념이 아니다
> 



### 가상 메모리의 메모리 분할 방식

<img src="image\스크린샷_2022-05-09_오후_4.21.30.png" alt="스크린샷_2022-05-09_오후_4.21.30" style="zoom:50%;" />

- 가변 분할 방식을 이용한 세그멘테이션, 고정 분할 방식을 이용한 페이징 기법 두가지 있음
- 세그멘테이션은 외부 단편화 등의 문제 때문에 잘 사용되지 않음
- 페이징 기법은 페이지 관리에 어려움이 있음
- 가상 메모리 시스템에선 이 두가지를 혼용하여 단점을 보완한 기법을 사용



### 메모리 매핑 테이블(MMT)

<img src="image\스크린샷_2022-05-09_오후_4.31.14.png" alt="스크린샷_2022-05-09_오후_4.31.14" style="zoom:50%;" />

- 가상 메모리 시스템에서 메모리 관리자MMU는 가상 주소와 물리 주소를 일대일 매핑 테이블로 관리
