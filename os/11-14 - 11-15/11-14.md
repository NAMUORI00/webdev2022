# 교착 상태



## 교착 상태 (Dead Lock)

- 교착상태의 개요
- 교착상태 필요조건
- 교착상태 해결방법
- 다중 자언과 교착 상태 검출



### 교착 상태의 정의

- 2개 이상의 프로세스가 다른 프로세스의 작업을 기다리며 더이상 일의 진행을 못하는 상태 (무한 대기)
- 아사 상태와 차이점
    - 아사 현상 : 운영체제가 잘못된 정책을 사용하여 특정 프로세스의 작업이 지연되는 문제
    - 교착 상태 : 여러 프로세스가 작업을 진행하다보니 자연적으로 일어나는 문제
        - 운영체제의 문제는 아니다, 아사 현상과 다르게 해결하는게 어렵다



### 자원할당 그래프

![image](image\image.png)

- 프로세스가 어떤 자원을 사용중이고 어떤 자원을 기다리고 있는지를 방향성 있는 그래프로 나타낸 것
- 프로세스는 원, 자원은 사각형으로 표현



### 교착 상태 필요 조건

- 상호 배제 : 한 프로세스가 사용하는 자원은 다른 프로세스와 공유 할 수 없는 자원이여야 함
- 비선점 : 한 프로세스가 사용 중인 자원은 중간에 다른 프로세스가 가져갈 수 없어야함
- 점유와 대기 : 프로세스가 어떤 자원을 할당받은 상태에서 다른 자원을 기다리는 상태여야 함
- 원형 대기 : 점유와 대기를 하는 프로세스 간의 과녜가 원을 이루어야 함

- 식사하는 철학자 문제
    - 왼쪽에 있는 포크를 잡은뒤 오른쪽에 있는 포크를 잡아야만 식사가 가능
    
    → 자원을 공유하지 못하면 교착상태가 됨
    
    → 자원을 뺏을 수 없으면 내려놓을 때 까지 기다려야하므로 교착 상태가 됨
    
    → 자원 하나를 집은 상태에서 다른 자원을 기다리면 교착 상태가 발생
    
    → 자원을 요구하는 방향이 원형을 이루면 영보를 하지 못하므로 교착 상태가 발생한다
    
- 만일 사각형 테이블 구조인경우
    - 교착상태는 발생하지 않지만, 한쪽 끝에서 부터 철학자가 식사를 끝마치고 다음으로 넘어가는 걸 기다리는 아사 현상이 있을 수 있음
    
- 교착상태 해결 방법
  
  
    | 해결방법 | 특징 |
    | --- | --- |
    | 교착 상태 예방 | 교착 상태를 유발하는 네 가지 조건을 무력화한다 |
    | 교착 상태 회피 | 교착 상태가 발생하지 않는 수준으로 자원을 할당한다 |
    | 교착 상태 검출 | 자원 할당 그래프를 사용하여 교착 상태를 발견한다 |
    | 교착 상태 회복 | 교착 상태를 검출한 후 해결한다 |
    - 예방, 회피, 검출이 대표적이고 발견후에 회복하는 방법이 있다.
    - 교착 상태 **예방**
        - 교착 상태를 유발하는 네 가지 조건이 발생하지 않도록 무력화하는 방식
    - 교착 상태 **회피**
        - 자원 할당량을 조절하여 교착 상태를 해결하는 방식
    - 교착 상태 **검출과 회복**
        - 교착 상태 검출은 어떤 제약을 가하지 않고 자원 할당 그래프를 모니ㅓ링하면서 교착 상태가 발생하는지 살펴보는 방식, 발생한경우 교착 상태 회복 단계를 실시
    
